(this.webpackJsonpshopify_spacetagram=this.webpackJsonpshopify_spacetagram||[]).push([[0],{27:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=n(9),c=n.n(a),o=(n(27),n(2)),i=n(3),l=n.n(i),h=n(4),d=n(5),p=n(10),j=n(11),u=n(13),b=n(12),f="fUwiBPvvBwZXfky5QXVrVsSlOmRHlLQXnnZv03dI";function O(e){return x.apply(this,arguments)}function x(){return(x=Object(h.a)(l.a.mark((function e(t){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:if(s=e.sent,n.ok){e.next=8;break}throw s;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=Object(h.a)(l.a.mark((function e(t){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.nasa.gov/mars-photos/api/v1/manifests/".concat(t,"/?api_key=").concat(f),e.next=3,O(n);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return S.apply(this,arguments)}function S(){return(S=Object(h.a)(l.a.mark((function e(t,n){var s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="https://api.nasa.gov/mars-photos/api/v1/rovers/".concat(t,"/photos?sol=").concat(n,"&api_key=").concat(f),e.next=3,O(s);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=n(22),P=(n(39),n(40),n(0));function y(e){return Object(P.jsxs)("div",{children:[Object(P.jsx)("h2",{children:"Select a rover"}),Object(P.jsx)("ul",{className:"rover-list",children:e.rovers.map((function(t,n){return Object(P.jsx)("li",{className:t===e.rover.name?"current":"",onClick:function(){return e.handleSelectRover(t)},children:t},n)}))})]})}n(42);function C(e){return e.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")}function _(e){return Object(P.jsx)(P.Fragment,{children:e.rover.name&&Object(P.jsxs)("div",{children:[Object(P.jsx)("h2",{children:e.rover.name}),Object(P.jsxs)("dl",{children:[Object(P.jsx)("dt",{children:"Launch date: "}),Object(P.jsx)("dd",{children:e.rover.launch_date}),Object(P.jsx)("dt",{children:"Landing date: "}),Object(P.jsx)("dd",{children:e.rover.landing_date}),Object(P.jsx)("dt",{children:"Latest day with photos: "}),Object(P.jsx)("dd",{children:e.rover.max_date}),Object(P.jsx)("dt",{children:Object(P.jsx)("div",{children:"Last Martian day (Sol) since landing with photos: "})}),Object(P.jsx)("dd",{children:C(e.rover.max_sol)}),Object(P.jsx)("dt",{children:"Status: "}),Object(P.jsx)("dd",{children:e.rover.status.toUpperCase()}),Object(P.jsx)("dt",{children:"Total Photos: "}),Object(P.jsx)("dd",{children:C(e.rover.total_photos)})]}),Object(P.jsxs)("form",{onSubmit:e.handleRequestPhotos,children:[Object(P.jsx)("label",{htmlFor:"solPicker",children:"Show me photos from Sol:"}),Object(P.jsxs)("span",{children:[Object(P.jsx)("input",{type:"number",id:"solPicker",name:"solPicker",min:"0",max:e.rover.max_sol,value:e.solPicker,onChange:e.handleChangeSolInput,required:!0}),Object(P.jsx)("button",{className:"bg-white",type:"submit",children:"Go"})]})]}),Object(P.jsx)("p",{children:e.solPickerHint})]})})}function F(e){return Object(P.jsx)(P.Fragment,{children:"number"===typeof e.sol&&Object(P.jsxs)("div",{children:[Object(P.jsxs)("h2",{children:["Sol ",e.sol]}),e.solInfo.empty?Object(P.jsx)("p",{children:"No photos from this date"}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("p",{children:["Earth Date: ",Object(P.jsx)("span",{children:e.solInfo.earth_date})]}),Object(P.jsxs)("p",{children:["Total Photos: ",Object(P.jsx)("span",{children:C(e.solInfo.total_photos)})]}),Object(P.jsxs)("h3",{children:["Cameras in use:",Object(P.jsx)("br",{}),"(Click to filter)"]}),Object(P.jsx)("ul",{className:"cameras",children:e.solInfo.cameras.map((function(t,n){return Object(P.jsx)("li",{onClick:function(){return e.handleFilterCamera(t)},className:t===e.camFilter?"current":"",children:t},n)}))})]})]})})}n(43);function w(e){return Object(P.jsxs)("p",{className:"page-info",children:[Object(P.jsxs)("span",{children:[" Sol ",e.sol," "]}),e.camFilter?Object(P.jsxs)("span",{children:[" | Camera: ",e.camFilter," "]}):"",Object(P.jsxs)("span",{children:[" | Photos ",e.slice+1," - ",e.sliceEnd," of ",e.photoSet.length," "]}),Object(P.jsxs)("span",{children:[" | Page ",Math.ceil(e.sliceEnd/e.photosPerPage),"/",Math.ceil(e.photoSet.length/e.photosPerPage)," "]})]})}function E(e){return Object(P.jsxs)(P.Fragment,{children:[e.slice>0&&Object(P.jsx)("button",{onClick:function(){return e.handleLoadMore(-1)},children:"Previous page"}),e.sliceEnd!==e.photoSet.length&&Object(P.jsx)("button",{onClick:function(){return e.handleLoadMore(1)},children:"Next page"})]})}n(44);var L=function(e){Object(u.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={loaded:!1},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(P.jsxs)("li",{children:[Object(P.jsxs)("figure",{className:this.state.loaded?null:"loading",children:[Object(P.jsx)("img",{onLoad:function(){return e.setState({loaded:!0})},src:this.props.p.img_src,alt:"Mars rover ".concat(this.props.rover.name," photo id ").concat(this.props.p.id,", taken with ").concat(this.props.p.camera.full_name," on ").concat(this.props.p.earth_date)}),Object(P.jsxs)("figcaption",{children:[Object(P.jsxs)("div",{children:["ID: ",this.props.p.id]}),Object(P.jsxs)("div",{children:["Camera: ",this.props.p.camera.full_name]}),Object(P.jsxs)("div",{children:["Earth Date: ",this.props.p.earth_date]})]})]}),Object(P.jsx)("button",{onClick:function(t){return e.props.handleClickLike(e.props.p.id)},style:this.props.likes[this.props.p.id]?{backgroundColor:"pink",color:"black"}:{},children:this.props.likes[this.props.p.id]?"Unlike":"Like"})]})}}]),n}(s.Component);function I(e,t){var n=e.find((function(e){return e.sol===t}));return isNaN(t)?String.fromCharCode(160):"undefined"===typeof n?"No photos from Sol ".concat(t):"".concat(n.total_photos," photos from Sol ").concat(t)}var M=function(e){Object(u.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={rovers:["Curiosity","Perseverance","Opportunity","Spirit"],rover:{name:"",landing_date:"",launch_date:"",max_date:"",max_sol:"",photos:[],status:"",total_photos:""},solInfo:{empty:!0},solPicker:0,solPickerHint:"",sol:"",photos:[],photoSet:[],camFilter:"",slice:0,likes:{},photosPerPage:8},e.setSliceEnd=function(t){return e.state.sliceEnd+e.state.photosPerPage*t>e.state.photoSet.length?e.state.photoSet.length:e.state.sliceEnd+e.state.photosPerPage*t},e.resetSliceEnd=function(t){return e.state.photosPerPage>t?t:e.state.photosPerPage},e.handleChangeSolInput=function(t){var n,s=parseInt(t.target.value);e.setState((n={},Object(d.a)(n,t.target.name,s),Object(d.a)(n,"solPickerHint",I(e.state.rover.photos,s)),n))},e.handleSelectRover=function(){var t=Object(h.a)(l.a.mark((function t(n){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(n);case 2:s=t.sent,e.setState({rover:s.photo_manifest,photos:[],slice:0,sol:"",camFilter:"",solPickerHint:I(s.photo_manifest.photos,e.state.solPicker)});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleRequestPhotos=function(){var t=Object(h.a)(l.a.mark((function t(n){var s,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.setState({sol:e.state.solPicker}),"undefined"!==typeof(s=e.state.rover.photos.find((function(t){return t.sol===e.state.solPicker})))){t.next=7;break}e.setState({solInfo:{empty:!0},photos:[]}),t.next=16;break;case 7:return e.setState({solInfo:Object(o.a)({empty:!1},s),loading:!0}),t.next=10,g(e.state.rover.name,e.state.sol);case 10:if((r=t.sent).length===e.state.solInfo.total_photos){t.next=15;break}return t.next=14,g(e.state.rover.name,e.state.sol);case 14:r=t.sent;case 15:e.setState({loading:!1,photos:r.photos,photoSet:r.photos,camFilter:"",slice:0,sliceEnd:e.resetSliceEnd(r.photos.length)});case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleFilterCamera=function(t){if(t===e.state.camFilter)e.setState({photoSet:e.state.photos,camFilter:"",slice:0,sliceEnd:e.resetSliceEnd(e.state.photos.length)});else{var n=e.state.photos.filter((function(e){return e.camera.name===t}));e.setState({photoSet:n,camFilter:t,slice:0,sliceEnd:e.resetSliceEnd(n.length)})}},e.handleLoadMore=function(t){e.state.sliceEnd===e.state.photoSet.length?e.setState({slice:e.state.slice-e.state.photosPerPage,sliceEnd:e.state.slice}):e.setState({slice:e.state.slice+e.state.photosPerPage*t,sliceEnd:e.setSliceEnd(t)})},e.handleClickLike=function(t){var n=e.state.likes;n[t]=!n[t],e.setState({likes:n})},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{children:"Spacestagram"}),Object(P.jsx)("p",{children:"A fun little React app for exploring Mars Rover photos"}),Object(P.jsxs)("p",{children:["by ",Object(P.jsx)("a",{href:"https://fraser.page",children:"Fraser Page"})]}),Object(P.jsxs)("header",{children:[Object(P.jsx)(y,Object(o.a)(Object(o.a)({},this.state),{},{handleSelectRover:this.handleSelectRover})),Object(P.jsx)(_,Object(o.a)(Object(o.a)({},this.state),{},{handleRequestPhotos:this.handleRequestPhotos,handleChangeSolInput:this.handleChangeSolInput})),Object(P.jsx)(F,Object(o.a)({handleFilterCamera:this.handleFilterCamera},this.state))]}),Object(P.jsxs)("main",{id:"main",children:[this.state.photoSet.length>0&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(w,Object(o.a)({},this.state)),Object(P.jsx)(E,Object(o.a)(Object(o.a)({},this.state),{},{handleLoadMore:this.handleLoadMore}))]}),Object(P.jsx)("ul",{children:this.state.loading?Array.from(Array(this.state.photosPerPage)).map((function(e,t){return Object(P.jsxs)("li",{className:"loading",children:[Object(P.jsx)("div",{}),Object(P.jsx)("div",{}),Object(P.jsx)("div",{}),Object(P.jsx)("div",{}),Object(P.jsx)("div",{})]},t)})):this.state.photoSet.slice(this.state.slice,this.state.sliceEnd).map((function(t){return Object(P.jsx)(L,Object(o.a)(Object(o.a)({},e.state),{},{p:t,handleClickLike:e.handleClickLike}),t.id)}))}),this.state.photoSet.length>0&&Object(P.jsx)(k.Link,{to:"main",spy:!1,smooth:!0,children:Object(P.jsx)(E,Object(o.a)(Object(o.a)({},this.state),{},{handleLoadMore:this.handleLoadMore}))})]})]})}}]),n}(s.Component),N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),s(e),r(e),a(e),c(e)}))};c.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(M,{})}),document.getElementById("root")),N()}},[[45,1,2]]]);
//# sourceMappingURL=main.e004ddba.chunk.js.map