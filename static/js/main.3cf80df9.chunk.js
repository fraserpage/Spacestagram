(this.webpackJsonpshopify_spacetagram=this.webpackJsonpshopify_spacetagram||[]).push([[0],{30:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),a=n(6),o=n.n(a),c=(n(30),n(3)),i=n(4),l=n.n(i),h=n(5),d=n(7),p=n(11),j=n(12),u=n(15),b=n(14),O="fUwiBPvvBwZXfky5QXVrVsSlOmRHlLQXnnZv03dI";function f(e){return x.apply(this,arguments)}function x(){return(x=Object(h.a)(l.a.mark((function e(t){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:if(s=e.sent,n.ok){e.next=8;break}throw s;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return g.apply(this,arguments)}function g(){return(g=Object(h.a)(l.a.mark((function e(t){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.nasa.gov/mars-photos/api/v1/manifests/".concat(t,"/?api_key=").concat(O),e.next=3,f(n);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return P.apply(this,arguments)}function P(){return(P=Object(h.a)(l.a.mark((function e(t,n){var s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="https://api.nasa.gov/mars-photos/api/v1/rovers/".concat(t,"/photos?sol=").concat(n,"&api_key=").concat(O),e.next=3,f(s);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=n(25),k=n(13),y=(n(41),n(42),n(1));function C(e){return Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{children:"Select a rover"}),Object(y.jsx)("ul",{className:"rover-list",children:e.rovers.map((function(t,n){return Object(y.jsx)("li",{className:t===e.rover.name?"current":"",onClick:function(){return e.handleSelectRover(t)},children:t},n)}))})]})}n(44);function E(e){return e.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")}function _(e){return Object(y.jsx)(y.Fragment,{children:e.rover.name&&Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{children:e.rover.name}),Object(y.jsxs)("dl",{children:[Object(y.jsx)("dt",{children:"Launch date: "}),Object(y.jsx)("dd",{children:e.rover.launch_date}),Object(y.jsx)("dt",{children:"Landing date: "}),Object(y.jsx)("dd",{children:e.rover.landing_date}),Object(y.jsx)("dt",{children:"Latest day with photos: "}),Object(y.jsx)("dd",{children:e.rover.max_date}),Object(y.jsx)("dt",{children:Object(y.jsx)("div",{children:"Last Martian day (Sol) since landing with photos: "})}),Object(y.jsx)("dd",{children:E(e.rover.max_sol)}),Object(y.jsx)("dt",{children:"Status: "}),Object(y.jsx)("dd",{children:e.rover.status.toUpperCase()}),Object(y.jsx)("dt",{children:"Total Photos: "}),Object(y.jsx)("dd",{children:E(e.rover.total_photos)})]}),Object(y.jsxs)("form",{onSubmit:e.handleRequestPhotos,children:[Object(y.jsx)("label",{htmlFor:"solPicker",children:"Show me photos from Sol:"}),Object(y.jsxs)("span",{children:[Object(y.jsx)("input",{type:"number",id:"solPicker",name:"solPicker",min:"0",max:e.rover.max_sol,value:e.solPicker,onChange:e.handleChangeSolInput,required:!0}),Object(y.jsx)("button",{className:"bg-white",type:"submit",children:"Go"})]})]}),Object(y.jsx)("p",{children:e.solPickerHint})]})})}function w(e){return Object(y.jsx)(y.Fragment,{children:"number"===typeof e.sol&&Object(y.jsxs)("div",{children:[Object(y.jsxs)("h2",{children:["Sol ",e.sol]}),e.solInfo.empty?Object(y.jsx)("p",{children:"No photos from this date"}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("p",{children:["Earth Date: ",Object(y.jsx)("span",{children:e.solInfo.earth_date})]}),Object(y.jsxs)("p",{children:["Total Photos: ",Object(y.jsx)("span",{children:E(e.solInfo.total_photos)})]}),Object(y.jsxs)("h3",{children:["Cameras in use:",Object(y.jsx)("br",{}),"(Click to filter)"]}),Object(y.jsx)("ul",{className:"cameras",children:e.solInfo.cameras.map((function(t,n){return Object(y.jsx)("li",{onClick:function(){return e.handleFilterCamera(t)},className:t===e.camFilter?"current":"",children:t},n)}))})]})]})})}n(45);function F(e){return Object(y.jsxs)("p",{className:"page-info",children:[Object(y.jsxs)("span",{children:[" Sol ",e.sol," "]}),e.camFilter?Object(y.jsxs)("span",{children:[" | Camera: ",e.camFilter," "]}):"",Object(y.jsxs)("span",{children:[" | Photos ",e.slice+1," - ",e.sliceEnd," of ",e.photoSet.length," "]}),Object(y.jsxs)("span",{children:[" | Page ",Math.ceil(e.sliceEnd/e.photosPerPage),"/",Math.ceil(e.photoSet.length/e.photosPerPage)," "]}),Object(y.jsxs)("span",{children:[" | ",Object(y.jsx)("label",{htmlFor:"photosPerPage",children:"Photos per page: "}),Object(y.jsx)("input",{type:"number",onChange:e.handleChangePhotosPerPage,value:e.photosPerPageCtrl,min:1,max:999,name:"photosPerPageCtrl",id:"photosPerPageCtrl",required:!0})]}),e.photosPerPageErr&&Object(y.jsx)("div",{style:{color:"red","--wght":600,display:"inline-block"},children:e.photosPerPageErr})]})}function L(e){return Object(y.jsxs)(y.Fragment,{children:[e.slice>0&&Object(y.jsx)("button",{onClick:function(){return e.handleLoadMore(-1)},children:"Previous page"}),e.sliceEnd!==e.photoSet.length&&Object(y.jsx)("button",{onClick:function(){return e.handleLoadMore(1)},children:"Next page"})]})}n(46);var I=function(e){Object(u.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={loaded:!1},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(y.jsxs)("li",{children:[Object(y.jsxs)("figure",{className:this.state.loaded?null:"loading",children:[Object(y.jsx)("img",{onLoad:function(){return e.setState({loaded:!0})},src:this.props.p.img_src,alt:"Mars rover ".concat(this.props.rover.name," photo id ").concat(this.props.p.id,", taken with ").concat(this.props.p.camera.full_name," on ").concat(this.props.p.earth_date)}),Object(y.jsxs)("figcaption",{children:[Object(y.jsxs)("div",{children:["ID: ",this.props.p.id]}),Object(y.jsxs)("div",{children:["Camera: ",this.props.p.camera.full_name]}),Object(y.jsxs)("div",{children:["Earth Date: ",this.props.p.earth_date]})]})]}),Object(y.jsx)("button",{onClick:function(t){return e.props.handleClickLike(e.props.p.id)},style:this.props.likes[this.props.p.id]?{backgroundColor:"pink",color:"black"}:{},children:this.props.likes[this.props.p.id]?"Unlike":"Like"})]})}}]),n}(s.Component);function N(e,t){var n=e.find((function(e){return e.sol===t}));return isNaN(t)?String.fromCharCode(160):"undefined"===typeof n?"No photos from Sol ".concat(t):"".concat(n.total_photos," photos from Sol ").concat(t)}n(47);function M(e){return Object(y.jsx)("ul",{children:Array.from(Array(e.photosPerPage)).map((function(e,t){return Object(y.jsxs)("li",{className:"loading",children:[Object(y.jsx)("div",{}),Object(y.jsx)("div",{}),Object(y.jsx)("div",{}),Object(y.jsx)("div",{}),Object(y.jsx)("div",{})]},t)}))})}var R=function(e){Object(u.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={rovers:["Curiosity","Perseverance","Opportunity","Spirit"],rover:{name:"",landing_date:"",launch_date:"",max_date:"",max_sol:"",photos:[],status:"",total_photos:""},solInfo:{empty:!0},solPicker:0,solPickerHint:"",sol:"",photos:[],photoSet:[],camFilter:"",slice:0,likes:{},photosPerPage:8,photosPerPageCtrl:8,photosPerPageErr:""},e.setSliceEnd=function(t){return e.state.sliceEnd+e.state.photosPerPage*t>e.state.photoSet.length?e.state.photoSet.length:e.state.sliceEnd+e.state.photosPerPage*t},e.resetSliceEnd=function(e,t){return t>e?e:t},e.handleChangeSolInput=function(t){var n,s=parseInt(t.target.value);e.setState((n={},Object(d.a)(n,t.target.name,s),Object(d.a)(n,"solPickerHint",N(e.state.rover.photos,s)),n))},e.handleChangePhotosPerPage=function(t){var n=parseInt(t.target.value);e.setState(Object(d.a)({},t.target.name,n)),n>1e3?e.setState({photosPerPageErr:"Ok let's not go crazy with "+n+" photos per page! You'll crash your browser! Max 999, deal?"}):n>0&&e.setState({photosPerPage:n,slice:0,sliceEnd:e.resetSliceEnd(e.state.photoSet.length,n),photosPerPageErr:""})},e.handleSelectRover=function(){var t=Object(h.a)(l.a.mark((function t(n){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(n);case 2:s=t.sent,e.setState({rover:s.photo_manifest,photos:[],photoSet:[],slice:0,sol:"",camFilter:"",solPickerHint:N(s.photo_manifest.photos,e.state.solPicker)});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleRequestPhotos=function(){var t=Object(h.a)(l.a.mark((function t(n){var s,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.setState({sol:e.state.solPicker}),"undefined"!==typeof(s=e.state.rover.photos.find((function(t){return t.sol===e.state.solPicker})))){t.next=7;break}e.setState({solInfo:{empty:!0},photos:[]}),t.next=16;break;case 7:return e.setState({solInfo:Object(c.a)({empty:!1},s),loading:!0}),t.next=10,v(e.state.rover.name,e.state.sol);case 10:if((r=t.sent).length===e.state.solInfo.total_photos){t.next=15;break}return t.next=14,v(e.state.rover.name,e.state.sol);case 14:r=t.sent;case 15:e.setState({loading:!1,photos:r.photos,photoSet:r.photos,camFilter:"",slice:0,sliceEnd:e.resetSliceEnd(r.photos.length,e.state.photosPerPage)});case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleFilterCamera=function(t){if(t===e.state.camFilter)e.setState({photoSet:e.state.photos,camFilter:"",slice:0,sliceEnd:e.resetSliceEnd(e.state.photos.length,e.state.photosPerPage)});else{var n=e.state.photos.filter((function(e){return e.camera.name===t}));e.setState({photoSet:n,camFilter:t,slice:0,sliceEnd:e.resetSliceEnd(n.length,e.state.photosPerPage)})}},e.handleLoadMore=function(t){e.state.sliceEnd===e.state.photoSet.length?e.setState({slice:e.state.slice-e.state.photosPerPage,sliceEnd:e.state.slice}):e.setState({slice:e.state.slice+e.state.photosPerPage*t,sliceEnd:e.setSliceEnd(t)})},e.handleClickLike=function(t){var n=e.state.likes;n[t]=!n[t],e.setState({likes:n})},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{children:"Spacestagram"}),Object(y.jsx)("p",{children:"A fun little React app for exploring Mars Rover photos"}),Object(y.jsxs)("p",{children:["by ",Object(y.jsx)("a",{href:"https://fraser.page",children:"Fraser Page"})]}),Object(y.jsxs)("header",{children:[Object(y.jsx)(C,Object(c.a)(Object(c.a)({},this.state),{},{handleSelectRover:this.handleSelectRover})),Object(y.jsx)(_,Object(c.a)(Object(c.a)({},this.state),{},{handleRequestPhotos:this.handleRequestPhotos,handleChangeSolInput:this.handleChangeSolInput})),Object(y.jsx)(w,Object(c.a)({handleFilterCamera:this.handleFilterCamera},this.state))]}),Object(y.jsxs)("main",{id:"main",children:[this.state.photoSet.length>0&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(F,Object(c.a)(Object(c.a)({},this.state),{},{handleChangePhotosPerPage:this.handleChangePhotosPerPage})),Object(y.jsx)(L,Object(c.a)(Object(c.a)({},this.state),{},{handleLoadMore:this.handleLoadMore}))]}),!isNaN(this.state.photosPerPage)&&this.state.loading?Object(y.jsx)(M,Object(c.a)({},this.state)):Object(y.jsx)(k.a,{children:Object(y.jsx)("ul",{children:this.state.photoSet.slice(this.state.slice,this.state.sliceEnd).map((function(t){return Object(y.jsx)(I,Object(c.a)(Object(c.a)({},e.state),{},{p:t,handleClickLike:e.handleClickLike}),t.id)}))})}),this.state.photoSet.length>0&&this.state.photosPerPage>0&&Object(y.jsx)(S.Link,{to:"main",spy:!1,smooth:!0,children:Object(y.jsx)(L,Object(c.a)(Object(c.a)({},this.state),{},{handleLoadMore:this.handleLoadMore}))})]})]})}}]),n}(s.Component),q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),s(e),r(e),a(e),o(e)}))};o.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(k.b,{children:Object(y.jsx)(R,{})})}),document.getElementById("root")),q()}},[[48,1,2]]]);
//# sourceMappingURL=main.3cf80df9.chunk.js.map